# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'code.ui'
#
# Created by: PyQt5 UI code generator 5.15.9
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets
import numpy as np
import keras

class Ui_Form(object):
    def setupUi(self, Form):
        Form.setObjectName("Form")
        Form.resize(787, 661)
        Form.setMouseTracking(True)
        Form.setContextMenuPolicy(QtCore.Qt.DefaultContextMenu)
        Form.setAcceptDrops(False)
        Form.setStyleSheet("color: rgb(255, 255, 255);")
        self.labelTitre = QtWidgets.QLabel(Form)
        self.labelTitre.setEnabled(True)
        self.labelTitre.setGeometry(QtCore.QRect(140, 60, 511, 41))
        font = QtGui.QFont()
        font.setFamily("MS Shell Dlg 2")
        font.setPointSize(13)
        font.setBold(True)
        font.setItalic(False)
        font.setWeight(75)
        self.labelTitre.setFont(font)
        self.labelTitre.setCursor(QtGui.QCursor(QtCore.Qt.ArrowCursor))
        self.labelTitre.setMouseTracking(True)
        self.labelTitre.setAutoFillBackground(False)
        self.labelTitre.setLocale(QtCore.QLocale(QtCore.QLocale.English, QtCore.QLocale.UnitedStates))
        self.labelTitre.setScaledContents(False)
        self.labelTitre.setObjectName("labelTitre")
        self.lineEditNpreg = QtWidgets.QLineEdit(Form)
        self.lineEditNpreg.setGeometry(QtCore.QRect(320, 190, 231, 31))
        self.lineEditNpreg.setTabletTracking(True)
        self.lineEditNpreg.setContextMenuPolicy(QtCore.Qt.DefaultContextMenu)
        self.lineEditNpreg.setAcceptDrops(True)
        self.lineEditNpreg.setWhatsThis("")
        self.lineEditNpreg.setPlaceholderText("0 if male")
        self.lineEditNpreg.setAccessibleName("")
        self.lineEditNpreg.setAccessibleDescription("")
        self.lineEditNpreg.setAutoFillBackground(False)
        self.lineEditNpreg.setStyleSheet("color: rgb(0, 0, 0);")
        self.lineEditNpreg.setObjectName("lineEditNpreg")
        self.lineEditBMI = QtWidgets.QLineEdit(Form)
        self.lineEditBMI.setGeometry(QtCore.QRect(320, 240, 231, 31))
        self.lineEditBMI.setContextMenuPolicy(QtCore.Qt.DefaultContextMenu)
        self.lineEditBMI.setAcceptDrops(True)
        self.lineEditBMI.setWhatsThis("")
        self.lineEditBMI.setAccessibleName("")
        self.lineEditBMI.setPlaceholderText("0-81")
        self.lineEditBMI.setAccessibleDescription("")
        self.lineEditBMI.setStyleSheet("color: rgb(0, 0, 0);")
        self.lineEditBMI.setObjectName("lineEditBMI")
        self.lineEditGlucose = QtWidgets.QLineEdit(Form)
        self.lineEditGlucose.setGeometry(QtCore.QRect(320, 300, 231, 31))
        self.lineEditGlucose.setContextMenuPolicy(QtCore.Qt.DefaultContextMenu)
        self.lineEditGlucose.setAcceptDrops(True)
        self.lineEditGlucose.setWhatsThis("")
        self.lineEditGlucose.setPlaceholderText("0-199 mg/dl")
        self.lineEditGlucose.setAccessibleName("")
        self.lineEditGlucose.setAccessibleDescription("")
        self.lineEditGlucose.setStyleSheet("color: rgb(0, 0, 0);")
        self.lineEditGlucose.setObjectName("lineEditGlucose")
        self.lineEditAge = QtWidgets.QLineEdit(Form)
        self.lineEditAge.setGeometry(QtCore.QRect(320, 350, 231, 31))
        self.lineEditAge.setContextMenuPolicy(QtCore.Qt.DefaultContextMenu)
        self.lineEditAge.setAcceptDrops(True)
        self.lineEditAge.setWhatsThis("")
        self.lineEditAge.setPlaceholderText("1-100 is recommended")
        self.lineEditAge.setAccessibleName("")
        self.lineEditAge.setAccessibleDescription("")
        self.lineEditAge.setStyleSheet("color: rgb(0, 0, 0);")
        self.lineEditAge.setObjectName("lineEditAge")
        self.labelNpreg = QtWidgets.QLabel(Form)
        self.labelNpreg.setGeometry(QtCore.QRect(200, 200, 81, 21))
        self.labelNpreg.setStyleSheet("color: rgb(255, 255, 255);\n"
"color: rgb(0, 0, 0);\n"
"font: 75 8pt \"MS Shell Dlg 2\";\n"
"font: 75 8pt \"MS Shell Dlg 2\";")
        self.labelNpreg.setObjectName("labelNpreg")
        self.labelGlucose = QtWidgets.QLabel(Form)
        self.labelGlucose.setGeometry(QtCore.QRect(190, 300, 101, 21))
        self.labelGlucose.setStyleSheet("color: rgb(255, 255, 255);\n"
"color: rgb(0, 0, 0);")
        self.labelGlucose.setObjectName("labelGlucose")
        self.labelBMI = QtWidgets.QLabel(Form)
        self.labelBMI.setGeometry(QtCore.QRect(210, 250, 71, 21))
        self.labelBMI.setStyleSheet("color: rgb(255, 255, 255);\n"
"color: rgb(0, 0, 0);\n"
"font: 75 8pt \"MS Shell Dlg 2\";")
        self.labelBMI.setObjectName("labelBMI")
        self.labelAge = QtWidgets.QLabel(Form)
        self.labelAge.setGeometry(QtCore.QRect(250, 360, 41, 21))
        self.labelAge.setStyleSheet("color: rgb(255, 255, 255);\n"
"color: rgb(0, 0, 0);")
        self.labelAge.setObjectName("labelAge")
        self.pushButtonClear = QtWidgets.QPushButton(Form)
        self.pushButtonClear.setGeometry(QtCore.QRect(250, 440, 111, 41))
        self.pushButtonClear.setStyleSheet("color: rgb(0, 0, 0);")
        self.pushButtonClear.setObjectName("pushButtonClear")
        self.pushButtonClear.clicked.connect(self.clear)
        self.pushButtonResult = QtWidgets.QPushButton(Form)
        self.pushButtonResult.setGeometry(QtCore.QRect(440, 440, 111, 41))
        self.pushButtonResult.setStyleSheet("color: rgb(255, 255, 255);\n"
"color: rgb(0, 0, 0);")
        self.pushButtonResult.clicked.connect(self.calculation)
        self.pushButtonResult.setObjectName("pushButtonResult")
        self.labelResults = QtWidgets.QLabel(Form)
        self.labelResults.setGeometry(QtCore.QRect(210, 540, 231, 41))
        self.labelResults.setStyleSheet("color: rgb(255, 255, 255);\n"
"color: rgb(255, 0, 0);")
        self.labelResults.setLocale(QtCore.QLocale(QtCore.QLocale.English, QtCore.QLocale.UnitedStates))
        self.labelResults.setObjectName("labelResults")
        self.lcdNumberReslults = QtWidgets.QLCDNumber(Form)
        self.lcdNumberReslults.setGeometry(QtCore.QRect(470, 540, 91, 31))
        self.lcdNumberReslults.setObjectName("lcdNumberReslults")
        self.lcdNumberReslults.setStyleSheet("color: rgb(255, 0, 0);\n"
"color: rgb(255, 0, 0);\n"
"background-color: rgb(255, 0, 0);")
        self.lcdNumberReslults.setObjectName("lcdNumberReslults")
        self.label100 = QtWidgets.QLabel(Form)
        self.label100.setGeometry(QtCore.QRect(570, 540, 21, 31))
        self.label100.setObjectName("label100")

        self.retranslateUi(Form)
        QtCore.QMetaObject.connectSlotsByName(Form)

    def retranslateUi(self, Form):
        _translate = QtCore.QCoreApplication.translate
        Form.setWindowTitle(_translate("Form", "AI Diabetics Prediction Application"))
        self.labelTitre.setText(_translate("Form", "<html><head/><body><p align=\"justify\"><span style=\" font-size:14pt; text-decoration: underline; color:#ff0000;\">AI BASED DIABETICS PREDICTION SYSTEM</span></p></body></html>"))
        self.labelNpreg.setText(_translate("Form", "PREGNENCIES:"))
        self.labelGlucose.setText(_translate("Form", "GLUCOSE LEVEL:"))
        self.labelBMI.setText(_translate("Form", "BMI LEVEL :"))
        self.labelAge.setText(_translate("Form", "AGE :"))
        self.pushButtonClear.setText(_translate("Form", "Clear"))
        self.pushButtonResult.setText(_translate("Form", "Result"))
        self.labelResults.setText(_translate("Form", "<html><head/><body><p><span style=\" font-size:12pt; font-weight:600; color:#ff0000;\">GENERATED REPORT:</span></p></body></html>"))
        self.label100.setText(_translate("Form", "<html><head/><body><p><span style=\" font-size:14pt; color:#ff0000;\">%</span></p></body></html>"))

    def clear(self, Form):
        self.lineEditNpreg.clear()
        self.lineEditBMI.clear()
        self.lineEditGlucose.clear()
        self.lineEditAge.clear()
        self.lcdNumberReslults.display(0.000)
   
    def results(self, Form):
        
        pass
    def calculation(self):
        #feature_names ['Pregnancies', 'Glucose', 'BloodPressure', 'SkinThickness', 'Insulin', 'BMI', 'DiabetesPedigreeFunction', 'Age']
        model = keras.models.load_model('model_ANN.h5')
        arr     =[self.lineEditNpreg,self.lineEditBMI,self.lineEditGlucose,self.lineEditAge]
        arr ,ee = self.empty_entry_validation(arr)
        if ee == 0:
            arr     =list(map(float,arr))
            # re = self.range_validation(arr)
            # if re == 0: 
            self.arr=arr
            arr     =np.array([np.array(arr)])
            # arr     =self.model.std_scaling(arr)
            self.pred    =model.predict(arr.reshape(1,4))
            self.lcdNumberReslults.display(float(self.pred[0][0]*100))
            print(self.pred)
            # else:
            #     self.showdialog("invalid values as input")
        else:
            self.showdialog("please  enter the values to continue....")
            
    def empty_entry_validation(self,arr):
        l=[]
        empty=0
        for x in arr:
            l.append(x.text())
        if '' in l :
            empty=1
        for i in range(len(l)):
            if l[i]=='.':
                arr[i].clear()
                empty=1
        return l,empty
    
    def showdialog(self,s):
        msg = QtWidgets.QMessageBox()
        msg.setIcon(QtWidgets.QMessageBox.Information)
        msg.setText("Message Alert!")
        msg.setInformativeText("Additional information")
        msg.setWindowTitle("Hi there!")
        msg.setDetailedText(s)
        msg.setStandardButtons(QtWidgets.QMessageBox.Ok | QtWidgets.QMessageBox.Cancel)
        msg.exec_()
    

if __name__ == "__main__":
    import sys
    app = QtWidgets.QApplication(sys.argv)
    Form = QtWidgets.QWidget()
    ui = Ui_Form()
    ui.setupUi(Form)
    Form.show()
    sys.exit(app.exec_())
